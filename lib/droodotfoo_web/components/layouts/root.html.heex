<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <meta name="csrf-token" content={get_csrf_token()} />
    
<!-- Favicons -->
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico" />
    <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png" />
    <link rel="apple-touch-icon" href="/images/apple-touch-icon.png" />
    
<!-- RSS Feed -->
    <link rel="alternate" type="application/rss+xml" title="DROO.FOO RSS Feed" href="/feed.xml" />
    
<!-- Canonical URL -->
    <link rel="canonical" href={"https://droo.foo#{assigns[:current_path] || "/"}"} />
    
<!-- SEO Meta Tags -->
    <meta
      name="description"
      content={
        assigns[:meta_description] ||
          "Engineer building his Gundam - Blockchain infrastructure and production-grade FOSS tooling for Cosmos and EVM ecosystems"
      }
    />
    <meta name="author" content="DROO" />
    <meta
      name="keywords"
      content="blockchain, elixir, ethereum, cosmos, web3, infrastructure, engineering"
    />
    
<!-- Open Graph Meta Tags -->
    <meta property="og:site_name" content="DROO.FOO" />
    <meta property="og:locale" content="en_US" />
    <meta property="og:title" content={assigns[:og_title] || assigns[:page_title] || "DROO.FOO"} />
    <meta
      property="og:description"
      content={
        assigns[:og_description] || assigns[:meta_description] ||
          "Blockchain infrastructure engineer building production-grade FOSS tooling"
      }
    />
    <meta property="og:type" content={assigns[:og_type] || "website"} />
    <meta property="og:url" content={"https://droo.foo#{assigns[:current_path] || "/"}"} />
    <meta
      property="og:image"
      content={assigns[:og_image] || "https://droo.foo/images/og-image.png"}
    />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    
<!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@MF_DROO" />
    <meta name="twitter:creator" content="@MF_DROO" />
    <meta
      name="twitter:title"
      content={
        assigns[:twitter_title] || assigns[:og_title] || assigns[:page_title] || "DROO.FOO"
      }
    />
    <meta
      name="twitter:description"
      content={
        assigns[:twitter_description] || assigns[:og_description] || assigns[:meta_description] ||
          "Blockchain infrastructure engineer building production-grade FOSS tooling"
      }
    />
    <meta
      name="twitter:image"
      content={
        assigns[:twitter_image] || assigns[:og_image] || "https://droo.foo/images/og-image.png"
      }
    />
    
<!-- Article-specific Meta Tags (for blog posts) -->
    <%= if assigns[:og_type] == "article" do %>
      <meta property="article:author" content="https://droo.foo" />
      <%= if assigns[:published_time] do %>
        <meta property="article:published_time" content={assigns[:published_time]} />
      <% end %>
      <%= if assigns[:modified_time] do %>
        <meta property="article:modified_time" content={assigns[:modified_time]} />
      <% end %>
      <%= if assigns[:article_section] do %>
        <meta property="article:section" content={assigns[:article_section]} />
      <% end %>
      <%= if assigns[:article_tags] do %>
        <%= for tag <- assigns[:article_tags] do %>
          <meta property="article:tag" content={tag} />
        <% end %>
      <% end %>
    <% end %>

    <.live_title default="DROO.FOO" suffix=" · Engineer building his Gundam">
      {assigns[:page_title]}
    </.live_title>
    <link phx-track-static rel="preload" href={~p"/assets/css/app.css"} as="style" />
    <link phx-track-static rel="stylesheet" href={~p"/assets/css/app.css"} />
    <link
      rel="preload"
      href="/fonts/MonaspaceArgon-Regular.woff2"
      as="font"
      type="font/woff2"
      crossorigin
    />
    <link
      rel="preload"
      href="/fonts/MonaspaceArgon-Bold.woff2"
      as="font"
      type="font/woff2"
      crossorigin
    />
    <!-- Preconnect to Spotify for faster embed loading -->
    <link rel="preconnect" href="https://open.spotify.com" crossorigin />
    <link rel="preconnect" href="https://i.scdn.co" crossorigin />
    <link rel="dns-prefetch" href="https://open.spotify.com" />
    <link rel="dns-prefetch" href="https://i.scdn.co" />
    <script
      defer
      phx-track-static
      type="module"
      src={~p"/assets/js/app.js"}
      nonce={@csp_nonce}
    >
    </script>
    
<!-- JSON-LD Structured Data -->
    <%= if assigns[:json_ld] do %>
      <%= for schema <- List.wrap(assigns[:json_ld]) do %>
        <script type="application/ld+json" nonce={@csp_nonce}>
          {raw(schema)}
        </script>
      <% end %>
    <% end %>
  </head>
  <body>
    <!-- Skip to main content link for screen readers -->
    <a href="#main-content" class="skip-to-content">Skip to main content</a>

    <%= if Application.get_env(:droodotfoo, :environment) == :dev do %>
      <!-- Debug Mode Indicator (dev only) -->
      <div id="debug-indicator" aria-live="polite" aria-atomic="true"></div>
    <% end %>
    
<!-- Theme Change Indicator -->
    <div id="theme-indicator" role="status" aria-live="polite" aria-atomic="true"></div>
    
<!-- Theme Toggle Button (desktop only) -->
    <button
      class="theme-toggle"
      id="theme-toggle"
      data-tooltip="Theme (Shift+T)"
      aria-label="Cycle Theme (Shift+T key)"
    >
      T
    </button>
    
<!-- Debug Toggle Button (desktop only) -->
    <button
      class="debug-toggle"
      id="debug-toggle"
      data-tooltip="Debug Mode (Shift+D)"
      aria-label="Toggle Debug Mode"
    >
      D
    </button>
    
<!-- Music Toggle Button (desktop only) -->
    <button
      class="music-toggle"
      id="music-toggle-desktop"
      data-tooltip="Music Player"
      aria-label="Toggle Music Player"
    >
      ♫
    </button>
    
<!-- Hamburger Menu (mobile only) -->
    <button class="hamburger-toggle" id="hamburger-toggle" aria-label="Open menu">
      <span class="hamburger-icon">☰</span>
    </button>

    <div class="hamburger-menu" id="hamburger-menu">
      <button class="menu-close" id="menu-close" aria-label="Close menu">×</button>

      <div class="menu-items">
        <!-- Terminal toggle removed - terminal archived -->

        <button id="menu-theme-toggle" class="menu-item" data-tooltip="Cycle Theme (Shift+T)">
          <span class="menu-icon">T</span>
          <span class="menu-label">Theme</span>
        </button>

        <button id="menu-debug-toggle" class="menu-item" data-tooltip="Toggle Debug Mode">
          <span class="menu-icon">D</span>
          <span class="menu-label">Debug</span>
        </button>

        <button id="menu-music-toggle" class="menu-item" data-tooltip="Toggle Music Player">
          <span class="menu-icon">♫</span>
          <span class="menu-label">Music</span>
        </button>
      </div>
    </div>
    
<!-- Main content landmark with id for skip link -->
    <main id="main-content" role="main">
      {@inner_content}
    </main>
    
<!-- Music Player (Spotify) - Site-wide, persists across pages -->
    <div
      id="music-player-widget"
      phx-update="ignore"
      class="music-player-persistent music-player-minimized"
    >
      <div class="music-player-content">
        <iframe
          id="spotify-player"
          title="Spotify Music Player"
          class="music-iframe spotify-iframe"
          style="border-radius:8px;"
          src="https://open.spotify.com/embed/playlist/6qfswybTWZ4FtWACSJVSPT?utm_source=generator&theme=0&autoplay=false"
          width="100%"
          height="152"
          frameborder="0"
          allowfullscreen=""
          allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
        >
        </iframe>
      </div>
    </div>
  </body>
</html>
